<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-g" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Archive It!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
      :root {
        --cursor-default: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><polygon points="4,4 10,28 28,10" fill="%2300ff00" stroke="%23000000" stroke-width="2" stroke-linejoin="round" /></svg>') 4 4, auto;
        --cursor-pointer: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><polygon points="4,4 10,28 28,10" fill="%23000000" stroke="%2300ff00" stroke-width="2" stroke-linejoin="round" /></svg>') 4 4, pointer;
      }
      body {
        font-family: 'VT323', monospace;
        cursor: var(--cursor-default);
      }
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
        20%, 40%, 60%, 80% { transform: translateX(2px); }
      }
      .animate-shake {
        animation: shake 0.75s infinite;
      }

      /* --- VISUAL GLITCH LAYER --- */
      /* 1. The "Broken Screen" Scanline Overlay */
      #scanline-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: repeating-linear-gradient(
          to bottom,
          transparent 0px,
          rgba(0, 255, 0, 0.05) 1px, /* Faint green lines */
          rgba(0, 255, 0, 0.05) 2px,
          transparent 2px,
          transparent 4px
        );
        z-index: 1000; /* Must be on top of everything */
        pointer-events: none; 
        /* Off by default */
        display: none;
      }

      /* 2. The "Flicker" Glitch */
      @keyframes flicker {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
      }

      /* 3. JavaScript "Toggle" Classes */
      /* We will add these classes to the with JS to turn glitches on/off */

      /* Toggles the Scanlines ON */
      body.scanlines-active #scanline-overlay {
        display: block;
      }

      /* Toggles the Desktop Flicker ON */
      body.flicker-active #desktop {
        animation: flicker 0.1s infinite;
      }

      /* Toggles the Desktop Shake ON (uses keyframe from Prompt 1) */
      body.shake-active #desktop {
        animation: shake 0.75s infinite;
      }

      /* --- JS "JUICE" CSS --- */
      @keyframes flicker-in {
        0% { opacity: 0.5; }
        25% { opacity: 1; }
        50% { opacity: 0.7; }
        75% { opacity: 1; }
        100% { opacity: 1; }
      }

      .window-open {
        animation: flicker-in 0.2s linear;
      }

      .title-bar {
        cursor: grab; /* Shows the user it's draggable */
      }

      .title-bar:active {
        cursor: grabbing;
      }
      
      /* --- THE PHYSICAL BEZEL (FIX) --- */
      /* This is the OUTER plastic casing */
      #monitor-bezel {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);

        /* This padding creates the thick plastic border */
        padding: 25px;

        background-color: #1a1a1a; /* Dark, grimy plastic grey */
        border: 3px solid #333;
        border-radius: 15px; /* Old CRT monitors had curved edges */

        /* This shadow makes it look like a real, physical object */
        box-shadow:
          0 0 30px rgba(0, 255, 0, 0.2), /* Green glow on the wall */
          inset 0 0 10px #000; /* Inner shadow */
      }

      /* This is the "sunk-in" CRT glass screen */
      #crt-glass {
        width: 95vw;
        height: 90vh;
        background-color: #000; /* The black of the screen */

        /* This is the "sunk-in" effect */
        box-shadow: inset 0 0 15px 5px rgba(0, 0, 0, 0.7);
        border-radius: 10px; /* The glass itself is slightly curved */
        overflow: hidden; /* Clips the desktop content */
        position: relative;
      }

      /* This adds the "grime", "vignette" AND colored lines on top of the glass */
      #crt-glass::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        
        /* Layered background: colored lines on top of grime/vignette */
        background:
          /* Layer 1: Animated Colored Lines */
          linear-gradient(
            to bottom,
            transparent 15%,
            rgba(170, 0, 255, 0.25) 15.2%,
            rgba(0, 170, 255, 0.25) 15.4%,
            transparent 15.6%,
            transparent 40%,
            rgba(255, 255, 255, 0.2) 40.1%,
            transparent 40.2%,
            transparent 65%,
            rgba(170, 0, 255, 0.2) 65.2%,
            transparent 65.3%,
            transparent 80%,
            rgba(0, 170, 255, 0.3) 80.1%,
            rgba(255, 255, 255, 0.2) 80.2%,
            transparent 80.4%
          ),
          /* Layer 2: Static Grime/Vignette */
          radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.4) 100%),
          url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAANElEQVR42mP4z8BQ/A/F0AANAwBDAwBDAwBDAwBDAwBDAwBDAwBDAwBDAwBDAwBDgLU3AABRAZvEcml2rAAAAABJRU5ErkJggg==');

        opacity: 0.9; /* Increased opacity for a stronger effect */
        pointer-events: none; /* Click through it */
        z-index: 1501; /* High z-index */
        animation: glitch-lines-scroll 1.2s linear infinite; /* Animate the lines */
      }
      
      /* --- PERMANENT SUBTLE GLITCH ON CRT GLASS --- */
      #crt-glass::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
          transparent 0px,
          transparent 3px,
          rgba(0, 255, 0, 0.03) 4px, /* Very faint green lines */
          rgba(0, 255, 0, 0.03) 5px
        );
        background-size: 100% 5px; /* Adjust line spacing */
        animation: subtle-vhs-scroll 0.5s linear infinite;
        opacity: 0.9; /* Adjust overall intensity */
        z-index: 1500; /* On top of desktop, below colored lines/popups */
        pointer-events: none; /* Crucial: Allows clicks to pass through */
      }


      /* This is our ACTUAL desktop, living inside the "glass" */
      #desktop {
        width: 100%;
        height: 100%;
        position: relative;
        /* This padding keeps icons from touching the "sunk-in" shadow */
        padding: 10px;
        box-sizing: border-box;
      }
      
      /* --- NEW Mini CRT Window Styling --- */
      .window {
        background-color: #1a1a1a !important; /* Bezel color */
        border: 2px solid #333 !important; /* Bezel edge */
        border-radius: 10px; /* Curved corners */
        padding: 3px;
        box-shadow: 0 0 20px rgba(0,255,0,0.1), inset 0 0 8px #000;
      }
      .window .title-bar {
        background-color: #004d00 !important; /* Dark green title */
        color: #66ff66 !important;
        border-bottom: 2px solid #333;
        border-radius: 6px 6px 0 0;
      }
      /* The "screen" of the mini-crt window */
      .window > .flex-grow {
        background-color: #000;
        border-radius: 5px;
        box-shadow: inset 0 0 10px 3px rgba(0,0,0,0.7);
        position: relative;
      }
      /* Vignette for the mini-crt window */
      .window > .flex-grow::before {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: radial-gradient(ellipse at center, transparent 70%, rgba(0,0,0,0.5) 100%);
        pointer-events: none;
        z-index: 10;
        border-radius: 5px;
      }


      /* --- Terminal Message Styling --- */
      .terminal-msg.system {
        color: #f59e0b; /* Amber color for system status */
      }
      .terminal-msg.player {
         color: #a3e635; /* Brighter lime for player input */
      }
      .terminal-msg.ai {
        /* Default text color is fine for AI */
      }
      .victory-cat {
        font-family: 'monospace', 'Courier New', Courier;
        line-height: 1.1;
        color: #00FFFF; /* Cyan victory color */
        margin-top: 10px;
        margin-bottom: 10px;
      }

      /* --- CUSTOM SCROLLBAR --- */
      #terminal-log::-webkit-scrollbar, .email-list::-webkit-scrollbar, .email-content::-webkit-scrollbar {
        width: 8px;
      }

      #terminal-log::-webkit-scrollbar-track, .email-list::-webkit-scrollbar-track, .email-content::-webkit-scrollbar-track {
        background: #111;
      }

      #terminal-log::-webkit-scrollbar-thumb, .email-list::-webkit-scrollbar-thumb, .email-content::-webkit-scrollbar-thumb {
        background-color: #005000; /* Dark green */
        border-radius: 4px;
        border: 1px solid #00FF00; /* Bright green border */
      }

      #terminal-log::-webkit-scrollbar-thumb:hover, .email-list::-webkit-scrollbar-thumb:hover, .email-content::-webkit-scrollbar-thumb:hover {
        background-color: #008000;
      }

      /* --- FINALE / BUG HUNT MINIGAME --- */
      #desktop.frozen {
        filter: grayscale(50%) blur(1px);
        pointer-events: none;
      }
      #desktop.frozen * {
        pointer-events: none;
      }
      .bug {
        position: absolute;
        font-size: 24px;
        cursor: var(--cursor-pointer);
        user-select: none;
        z-index: 10000;
        pointer-events: auto; /* Make it clickable over the frozen desktop */
        text-shadow: 0 0 5px rgba(0, 255, 0, 0.7);
        transition: transform 0.1s ease-out;
      }
      .bug:hover {
        transform: scale(1.5);
      }
      
      /* --- POPUP HELL --- */
      .popup-window {
        position: absolute;
        background-color: #280000; /* Dark, dark red */
        border: 2px solid #ff0000;
        border-radius: 10px;
        box-shadow: 0 0 25px rgba(255, 0, 0, 0.5), inset 0 0 10px #000;
        padding: 3px;
        z-index: 20000;
        color: #fdd; /* Pale red/off-white text */
        font-family: 'VT323', monospace;
      }
      .popup-title-bar {
        background-color: #aa0000; /* Bright red */
        color: white;
        padding: 2px 4px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 2px solid #ff0000;
        border-radius: 6px 6px 0 0;
      }
      .popup-content {
        padding: 15px;
        background-color: #1a0000;
        border-radius: 5px;
        box-shadow: inset 0 0 10px 3px rgba(0,0,0,0.7);
        position: relative; /* For button positioning */
      }
      .popup-close-button {
        position: absolute;
        background-color: #330000;
        border: 2px solid #ff0000;
        color: #fdd;
        border-radius: 5px;
        padding: 2px 10px;
        cursor: var(--cursor-pointer);
        font-family: 'VT323', monospace;
        transition: background-color 0.2s;
      }
      .popup-close-button:hover {
        background-color: #550000;
      }
      .popup-close-button:active {
        background-color: #770000;
      }
      .desktop-icon-interactive {
        cursor: var(--cursor-pointer);
      }
      .popup-error-icon {
        display: inline-block;
        width: 32px;
        height: 32px;
        background-color: #ff0000;
        color: white;
        border-radius: 50%;
        text-align: center;
        font-weight: bold;
        font-family: 'VT323', monospace;
        font-size: 24px;
        line-height: 32px;
        margin-right: 10px;
        flex-shrink: 0;
        border: 2px solid white;
      }
      @keyframes popup-close-flash {
        0%, 100% { border-color: #ff0000; }
        50% { border-color: #ffffff; opacity: 0.5; }
      }
      .popup-window.is-closing {
        animation: popup-close-flash 0.3s linear;
      }


      /* --- FINALE GLITCHES --- */
      body.cursor-glitch {
        cursor: wait !important;
      }
      .bug-swarm {
         background-color: white !important;
         transition: background-color 1s ease-in;
      }

      #crt-glass.glitch-invert {
        filter: invert(1);
      }

      #crt-glass.glitch-shake {
        animation: shake 0.75s infinite;
      }

      /* --- NEW RECTANGLE BAR GLITCH --- */
      @keyframes glitch-bar-block {
        0%, 100% { transform: translate(0, 0); opacity: 1; }
        10% { transform: translate(-2%, 5%); }
        20% { transform: translate(3%, -2%); }
        30% { transform: translate(-1%, 3%); height: 30%; top: 35%; }
        40% { transform: translate(2%, -4%); height: 10%; top: 80%; }
        50% { transform: translate(-3%, 1%); height: 25%; top: 10%; }
        60% { opacity: 0.5; }
        70% { transform: translate(1%, 3%); }
        80% { transform: translate(-2%, -1%); height: 20%; top: 50%; }
        90% { transform: translate(3%, 2%); }
      }

      #crt-glass.glitch-bars::before {
        /* This overrides the default ::before to create the glitch effect */
        content: '';
        position: absolute;
        left: 0;
        top: 20%; /* Initial position */
        width: 100%;
        height: 15%; /* Initial height */
        background: rgba(0,0,0,0.8);
        box-shadow: 0 0 5px 2px rgba(255,0,0,0.5) inset; /* Red corrupted glow */
        z-index: 1505;
        pointer-events: none;
        animation: glitch-bar-block 0.5s linear infinite alternate;
      }


      @keyframes subtle-flicker-anim {
        0%, 100% { filter: brightness(1); }
        50% { filter: brightness(0.7); }
      }
      #crt-glass.subtle-flicker {
        animation: subtle-flicker-anim 0.15s linear;
      }

      @keyframes static-noise {
        0%, 100% { background-position: 0 0; }
        10% { background-position: -5% -10%; }
        20% { background-position: -15% 5%; }
        30% { background-position: 7% -25%; }
        40% { background-position: 20% 25%; }
        50% { background-position: -25% 10%; }
        60% { background-position: 15% 5%; }
        70% { background-position: 0 15%; }
        80% { background-position: 25% 35%; }
        90% { background-position: -10% 10%; }
      }
      #crt-glass.glitch-static::after {
        content: '';
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWDg4N3d3dtbW17e3t1dXVuZmaPe2iOjeD///8/Pz9aWlpsbGxMSkpDQ0NBPjxtaGxAHjEdTEMUHx8gJyczMTSDg4N3d3dtbW17e3t1dXVuZmaPe2iOjeD///8/Pz9aWlpsbGxMSkpDQ0NBPjxtaGxAHjEdTEMUHx8gJyczMTSDg4N3d3dtbW17e3t1dXVuZmaPe2iOjeD///8/Pz9aWlpsbGxMSkpDQ0NBPjxtaGxAHjEdTEMUHx8gJyczMTSDg4N3d3dtbW1t7e3t1dXV3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d-VBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAANElEQVR42mP4z8BQ/A/F0AANAwBDAwBDAwBDAwBDAwBDAwBDAwBDAwBDAwBDAwBDgLU3AABRAZvEcml2rAAAAABJRU5ErkJggg==');
        opacity: 0.15;
        z-index: 1502; /* Ensure this is on top of other permanent effects */
        pointer-events: none;
        animation: static-noise 0.2s steps(4) infinite;
      }

      @keyframes tear-anim {
        0%, 100% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); }
        25% { clip-path: polygon(0 0, 100% 20%, 100% 100%, 0 80%); }
        50% { clip-path: polygon(0 20%, 100% 0, 100% 80%, 0 100%); }
        75% { clip-path: polygon(0 80%, 100% 80%, 100% 20%, 0 20%); }
      }
      #crt-glass.glitch-tear {
        animation: tear-anim 0.45s linear;
      }
      
      @keyframes glitch-lines-scroll {
        from {
          background-position-y: 0;
        }
        to {
          background-position-y: -10px; /* A slow, subtle scroll */
        }
      }

      /* Keyframes for Option 1: Subtle Scanline Scroll */
      @keyframes subtle-vhs-scroll {
        from { background-position-y: 0; }
        to { background-position-y: -5px; } /* Scrolls one line height */
      }

      /* --- PROMPT 6.1: SAD CAT GAME OVER POPUP --- */
      .game-over-popup {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 10000; /* Sit on top of everything */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0, 0, 0, 0.9); /* Black background with opacity */
        backdrop-filter: blur(5px); /* Optional blur effect */
        -webkit-backdrop-filter: blur(5px); /* Safari support */
        color: #00FF00; /* Green text */
        text-align: center;
        padding-top: 50px;
      }
      .game-over-popup .popup-content {
        margin: auto;
        padding: 20px;
        width: 90%;
        max-width: 600px;
        background-color: rgba(10, 20, 10, 0.8); /* Slightly lighter dark green */
        border: 2px solid #00FF00;
        box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
      }
      .game-over-popup .cat-ascii {
        font-family: 'monospace', 'Courier New', Courier; /* Essential for ASCII art */
        font-size: 16px; /* Adjust size to fit */
        line-height: 1; /* Tighter lines */
        white-space: pre; /* Preserves spaces/line breaks */
        color: #00FF00;
        margin-bottom: 20px;
      }
      .game-over-popup .popup-message {
        font-size: 1.8em;
        margin-bottom: 10px;
        color: #FF0000; /* Red for alert */
        text-shadow: 0 0 5px #FF0000;
      }
      .game-over-popup .popup-submessage {
        font-size: 1.2em;
        color: #00FF00;
      }

      /* --- LORE WINDOW --- */
      .lore-content {
        background-color: #050505;
        color: #bbb;
        font-size: 0.9em;
        white-space: pre-wrap;
        line-height: 1.4;
        overflow-y: auto;
        height: 100%;
        padding: 5px;
      }
      .lore-content .redacted {
        background-color: #990000; /* Dark Red redaction */
        color: #990000;
        user-select: none;
        padding: 0 2px; /* Slight padding */
      }
      .lore-content .glitchy { /* For glitchy text */
          display: inline-block;
          animation: text-glitch 0.1s infinite alternate steps(2, start);
          color: #FF5555; /* Make glitchy text stand out */
      }
      @keyframes text-glitch {
          0% { transform: skewX(-5deg) translateX(-2px); opacity: 0.8;}
          100% { transform: skewX(5deg) translateX(2px); opacity: 1;}
      }

      /* --- GTA-STYLE ARRIVAL NOTICE --- */
      #arrival-notice {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: #000;
        color: #00FF00;
        z-index: 10000;
        opacity: 0;
        transition: opacity 0.2s linear;
      }
      #arrival-notice.visible {
        opacity: 1;
      }
      #arrival-notice.exiting {
        animation: gta-exit-glitch 0.5s ease-out forwards;
      }
      .gta-location {
        position: absolute;
        top: 2rem;
        left: 2rem;
        font-size: 1.5rem;
        color: #00FF00;
        opacity: 0;
        animation: gta-text-glitch-in 0.8s 0.5s forwards;
      }
      .gta-briefing {
        position: absolute;
        top: 6rem; /* Below the location */
        left: 2rem;
        font-size: 1.2rem;
        color: #a3e635; /* Brighter lime for HUD feel */
        max-width: 40%;
        line-height: 1.4;
        text-shadow: 0 0 3px #a3e635;
        opacity: 0;
        animation: gta-text-glitch-in 0.8s 0.7s forwards;
        white-space: pre-wrap;
      }
      .gta-title-container {
        text-align: center;
        transform: scale(1.5);
        opacity: 0;
        animation: gta-title-slam 1s 0.2s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      .gta-main-title {
        position: relative; /* For pseudo-element glitch */
        font-size: 10rem;
        font-weight: bold;
        color: #fff;
        text-shadow:
          0 0 5px #0f0, 0 0 10px #0f0, 0 0 20px #0f0,
          0 0 40px #0f0, 0 0 80px #0f0, 3px 3px 2px rgba(0,0,0,0.5);
        letter-spacing: 0.1em;
        animation: gta-title-glitch-main 1.5s infinite steps(4);
      }
      .gta-main-title::before,
      .gta-main-title::after {
        content: 'ARCHIVE IT!';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #000;
        overflow: hidden;
      }
      .gta-main-title::before {
        left: 2px;
        text-shadow: -2px 0 #ff00ff; /* Magenta */
        animation: gta-glitch-anim-1 2s infinite linear alternate-reverse;
      }
      .gta-main-title::after {
        left: -2px;
        text-shadow: -2px 0 #00ffff, 2px 2px #ff00ff; /* Cyan and Magenta */
        animation: gta-glitch-anim-2 1s infinite linear alternate-reverse;
      }
      .gta-subtitle {
        font-size: 2.5rem;
        color: #00FF00;
        margin-top: -1rem;
        text-shadow: 0 0 5px #0f0, 2px 2px 2px rgba(0,0,0,0.5);
        opacity: 0;
        animation: gta-text-glitch-in 0.8s 0.8s forwards;
      }
      .gta-prompt {
        position: absolute;
        bottom: 3rem;
        font-size: 1.8rem;
        color: #fff;
        text-shadow: 0 0 5px #0f0;
        opacity: 0;
        animation: gta-prompt-blink 2s infinite, gta-text-glitch-in 0.8s 1.2s forwards;
      }
      @keyframes gta-title-slam {
        0% { transform: scale(1.5) skew(-15deg); opacity: 0; filter: blur(10px); }
        50% { transform: scale(0.9) skew(5deg); opacity: 1; filter: blur(0px); }
        100% { transform: scale(1) skew(0deg); opacity: 1; filter: blur(0px); }
      }
      @keyframes gta-text-glitch-in {
        0% { opacity: 0; transform: translateY(20px); text-shadow: 0 0 20px red; }
        20% { opacity: 1; transform: translateY(0px) skewX(10deg); text-shadow: 0 0 5px blue; }
        40% { transform: skewX(-10deg); }
        60% { transform: skewX(5deg); }
        80% { transform: skewX(-2deg); }
        100% { opacity: 1; transform: translateY(0) skewX(0); }
      }
      @keyframes gta-prompt-blink {
        0%, 45%, 100% { opacity: 1; }
        50%, 95% { opacity: 0.5; }
      }
      @keyframes gta-exit-glitch {
        0% { opacity: 1; filter: brightness(1) invert(0); }
        25% { transform: scale(1.02); filter: brightness(3) invert(0.5); }
        50% { opacity: 0.5; transform: scale(0.98); filter: brightness(1) invert(0); }
        75% { transform: scale(1.01); filter: brightness(5) invert(1); }
        100% { opacity: 0; transform: scale(1.5); filter: brightness(10) invert(1); }
      }

      /* Keyframes for the new title glitch */
      @keyframes gta-title-glitch-main {
        0% { transform: skewX(0deg); }
        25% { transform: skewX(1deg); }
        50% { transform: skewX(0deg); }
        75% { transform: skewX(-1deg); }
        100% { transform: skewX(0deg); }
      }
      @keyframes gta-glitch-anim-1 {
        0% { clip-path: polygon(0 2%, 100% 2%, 100% 5%, 0 5%); }
        10% { clip-path: polygon(0 15%, 100% 15%, 100% 15%, 0 15%); }
        20% { clip-path: polygon(0 10%, 100% 10%, 100% 20%, 0 20%); }
        30% { clip-path: polygon(0 1%, 100% 1%, 100% 2%, 0 2%); }
        40% { clip-path: polygon(0 33%, 100% 33%, 100% 33%, 0 33%); }
        50% { clip-path: polygon(0 44%, 100% 44%, 100% 44%, 0 44%); }
        60% { clip-path: polygon(0 50%, 100% 50%, 100% 20%, 0 20%); }
        70% { clip-path: polygon(0 70%, 100% 70%, 100% 70%, 0 70%); }
        80% { clip-path: polygon(0 80%, 100% 80%, 100% 80%, 0 80%); }
        90% { clip-path: polygon(0 50%, 100% 50%, 100% 55%, 0 55%); }
        100% { clip-path: polygon(0 60%, 100% 60%, 100% 70%, 0 70%); }
      }
      @keyframes gta-glitch-anim-2 {
        0% { clip-path: polygon(0 62%, 100% 62%, 100% 80%, 0 80%); }
        15% { clip-path: polygon(0 5%, 100% 5%, 100% 5%, 0 5%); }
        25% { clip-path: polygon(0 80%, 100% 80%, 100% 80%, 0 80%); }
        35% { clip-path: polygon(0 80%, 100% 80%, 100% 80%, 0 80%); }
        45% { clip-path: polygon(0 50%, 100% 50%, 100% 50%, 0 50%); }
        55% { clip-path: polygon(0 70%, 100% 70%, 100% 90%, 0 90%); }
        65% { clip-path: polygon(0 30%, 100% 30%, 100% 50%, 0 50%); }
        75% { clip-path: polygon(0 15%, 100% 15%, 100% 35%, 0 35%); }
        85% { clip-path: polygon(0 40%, 100% 40%, 100% 60%, 0 60%); }
        95% { clip-path: polygon(0 22%, 100% 22%, 100% 42%, 0 42%); }
        100% { clip-path: polygon(0 90%, 100% 90%, 100% 95%, 0 95%); }
      }
      
      /* --- NEWS TICKER --- */
      #news-ticker {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 40px;
        background-color: #f7ff00; /* Neon Yellow/Lime */
        color: #dc2626; /* Red */
        font-size: 1.5rem;
        line-height: 38px;
        overflow: hidden;
        z-index: 1000;
        border-top: 2px solid #1a1a1a;
        box-shadow: 0 0 15px rgba(247, 255, 0, 0.5);
      }
      .scrolling-headline {
        position: absolute;
        white-space: nowrap;
        animation: scroll-headline 20s linear forwards;
      }
      @keyframes scroll-headline {
        from { transform: translateX(100vw); }
        to { transform: translateX(-100%); }
      }

      /* --- NETFEED WINDOW --- */
      .netfeed-container {
        position: relative;
        background-color: #020202;
        overflow: hidden;
        height: 100%;
        padding: 16px;
        color: #aaffaa;
        font-family: monospace;
        line-height: 1.4;
      }
      .noise-bg {
        position: absolute;
        inset: 0;
        color: #0f0;
        font-size: 10px;
        white-space: pre;
        opacity: 0.12;
        mix-blend-mode: lighten;
        pointer-events: none;
        animation: scrollNoise 3s linear infinite;
      }
      @keyframes scrollNoise {
        from { transform: translateY(0); }
        to { transform: translateY(-50%); }
      }
      .fragment-text {
        position: relative;
        z-index: 5;
        font-size: 0.9rem;
        text-shadow: 0 0 6px #66ff99;
        animation: fadeInFragment 1.2s ease-in forwards;
      }
      @keyframes fadeInFragment {
        0% { opacity: 0; filter: blur(3px); }
        40% { opacity: 0.6; filter: blur(1px); }
        100% { opacity: 1; filter: blur(0); }
      }

      /* --- SKIP INTRO STYLES --- */
      .skip-flash {
        margin-top: 20px;
        text-align: center;
        color: #00ffcc;
        animation: blink 1s infinite;
      }
      .crt-flash {
        position: fixed;
        inset: 0;
        background: rgba(255, 255, 255, 0.8);
        animation: flashout 0.3s forwards;
        z-index: 999999;
      }
      .crt-flash-red {
        position: fixed;
        inset: 0;
        background: rgba(255, 0, 0, 0.6);
        animation: flashout 0.3s forwards;
        z-index: 999999;
      }
      @keyframes flashout {
        0% { opacity: 0; }
        30% { opacity: 1; }
        100% { opacity: 0; }
      }
      @keyframes blink {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 1; }
      }

      /* --- MEME DECRYPTOR MINIGAME --- */
      .meme-decryptor-container {
        background: radial-gradient(circle, #1a0008, #000);
        color: #ff0040;
        text-shadow: 0 0 6px #ff0040;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-around;
        height: 100%;
        padding: 10px;
        user-select: none;
      }
      .decryptor-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin: 20px 0;
        justify-items: center;
      }
      .decryptor-tile {
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        border: 2px solid #ff0040;
        cursor: var(--cursor-pointer);
        transition: background-color 0.2s, transform 0.2s;
      }
      .decryptor-tile:hover {
        background-color: rgba(255, 0, 64, 0.2);
      }
      .decryptor-tile.selected {
        background-color: rgba(255, 0, 64, 0.5);
        transform: scale(1.1);
        box-shadow: 0 0 10px #ff0040;
      }
      .decryptor-timer {
        font-size: 2.5rem;
      }
      .decryptor-status {
        font-size: 1.2rem;
        text-align: center;
      }

      /* --- PLAYWITHME (TIC-TAC-TOE) MINIGAME --- */
      .play-with-me-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        height: 100%;
        padding: 10px;
        background-color: #050505;
        color: #aaffaa;
        font-family: monospace;
        text-shadow: 0 0 3px #0f0;
        user-select: none;
      }
      .xo-dialogue {
        min-height: 40px;
        text-align: center;
        font-size: 1.1rem;
        padding: 5px;
        border-bottom: 1px solid #005000;
        width: 100%;
      }
      .xo-scores {
        display: flex;
        justify-content: space-around;
        width: 100%;
        font-size: 1.2rem;
        padding: 10px 0;
      }
      .xo-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        width: 240px;
        height: 240px;
        margin: 10px 0;
      }
      .xo-cell {
        background-color: transparent;
        border: 2px solid #005000;
        color: #aaffaa;
        font-size: 3rem;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: var(--cursor-pointer);
        transition: all 0.2s;
      }
      .xo-cell:hover:not(:disabled) {
        background-color: rgba(0, 255, 0, 0.1);
        border-color: #00FF00;
      }
      .xo-cell:disabled {
        cursor: not-allowed;
      }
      .xo-cell.x {
        color: #00FF00;
        text-shadow: 0 0 8px #00FF00;
      }
      .xo-cell.o {
        color: #ff00ff;
        text-shadow: 0 0 8px #ff00ff;
      }
      .xo-round-notice {
        font-size: 1.2rem;
        color: #f59e0b; /* amber */
      }
      .xo-cheating-glitch {
        animation: flicker 0.1s 3;
      }

      /* --- SNAKE GAME --- */
      .snake-game-container {
        width: 100%;
        height: 100%;
        background-color: #0a0a0a;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        font-family: 'VT323', monospace;
        color: #00ffcc;
        user-select: none;
      }
      .snake-game-container::before {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.7) 100%);
        pointer-events: none;
        z-index: 2;
      }
      .snake-game-container::after { /* Scanlines */
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
          transparent 0px,
          transparent 2px,
          rgba(0, 255, 204, 0.05) 3px
        );
        pointer-events: none;
        z-index: 3;
        animation: subtle-vhs-scroll 0.5s linear infinite;
      }

      .snake-dashboard {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 1rem;
        line-height: 1.2;
        text-shadow: 0 0 5px #00ffcc;
        z-index: 10;
      }

      .snake-grid {
        display: grid;
        border: 2px solid #00ffcc;
        box-shadow: 0 0 10px #00ffcc, inset 0 0 10px #00ffcc;
      }

      .snake-cell {
        width: 16px; /* Adjust size as needed */
        height: 16px;
        background-color: transparent;
        transition: background-color 0.1s;
      }

      .snake-body {
        background-color: #00ffcc;
        box-shadow: 0 0 8px #00ffcc, 0 0 4px #9c27b0 inset;
        position: relative;
      }

      .snake-fragment {
        background-color: #ff00ff; /* Pink/Magenta */
        box-shadow: 0 0 8px #ff00ff;
        animation: fragment-flicker 0.5s infinite;
        text-align: center;
        color: #ffff00;
        font-size: 16px;
        line-height: 16px;
        font-weight: bold;
      }

      @keyframes fragment-flicker {
        0% {
          background-color: #ff00ff;
          box-shadow: 0 0 8px #ff00ff, 0 0 4px #ff00ff inset;
          transform: scale(1);
        }
        50% {
          background-color: #ff3300;
          box-shadow: 0 0 16px #ff3300, 0 0 8px #ff3300 inset;
          transform: scale(1.1);
        }
        100% {
          background-color: #ff00ff;
          box-shadow: 0 0 8px #ff00ff, 0 0 4px #ff00ff inset;
          transform: scale(1);
        }
      }

      .snake-key {
        background-color: #ffd700;
        box-shadow: 0 0 8px #ffd700;
        animation: key-rotate 2s linear infinite;
      }

      @keyframes key-rotate {
        0% { filter: hue-rotate(0deg); }
        100% { filter: hue-rotate(360deg); }
      }

      .snake-glitch-block {
        background-color: #dc2626;
        box-shadow: 0 0 8px #dc2626;
        animation: glitch-block-anim 0.5s infinite;
      }

      @keyframes glitch-block-anim {
        0% { opacity: 0.8; }
        25% { transform: translateX(2px); }
        50% { opacity: 1; }
        75% { transform: translateX(-2px); }
        100% { opacity: 0.8; }
      }

      .snake-game-over-overlay {
        position: absolute;
        inset: 0;
        background-color: rgba(0,0,0,0.9);
        z-index: 20;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #dc2626;
        text-shadow: 0 0 8px #dc2626;
        animation: gameover-fadein 0.5s ease-in;
      }

      @keyframes gameover-fadein {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      .snake-game-over-overlay h2 {
        font-size: 3rem;
        margin-bottom: 1rem;
      }

      .snake-game-container.flash-red {
          animation: flash-red-anim 0.3s 1;
      }

      @keyframes flash-red-anim {
          0%, 100% { background-color: #0a0a0a; }
          50% { background-color: #990000; }
      }

      /* --- EMAIL INBOX --- */
      .email-inbox-container { /* Base container for auth and main view */
        display: flex;
        flex-direction: column; /* Auth prompt needs this */
        height: 100%;
        background: #020202;
        color: #C8FF00;
        font-family: 'VT323', monospace;
        user-select: none;
      }

      /* Auth prompt styles can stay mostly the same */
      .email-auth-prompt {
        align-items: center;
        justify-content: center;
        flex-grow: 1;
        padding: 20px;
        text-align: center;
      }
      .email-auth-prompt p { margin-bottom: 20px; }
      .email-auth-input-container { display: flex; align-items: center; }
      @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: #C8FF00; } }
      .email-auth-input {
        background: transparent;
        border: none;
        border-bottom: 1px solid #C8FF00;
        color: #C8FF00;
        font-size: 1.2rem;
        outline: none;
        width: 250px;
        animation: blink-caret .75s step-end infinite;
      }
      .email-auth-button {
        background-color: #1a1a1a;
        border: 1px solid #C8FF00;
        color: #C8FF00;
        padding: 5px 10px;
        margin-left: 10px;
        cursor: var(--cursor-pointer);
      }
      .email-auth-button:hover { background-color: #C8FF00; color: #1a1a1a; }
      .email-auth-error {
        color: #ff0000;
        text-shadow: 0 0 5px #ff0000;
        margin-top: 15px;
        animation: shake 0.5s;
      }

      /* This is the main view after auth */
      .email-inbox {
        flex-direction: row; /* This is the core fix for the split-pane layout */
        width: 100%;
        overflow: hidden;
        border-top: 2px solid #005000;
      }

      .email-list {
        width: 35%;
        border-right: 2px solid #005000;
        overflow-y: auto;
      }

      .email-list-header {
        padding: 8px;
        font-size: 1.1rem;
        border-bottom: 2px solid #005000;
        background-color: #003000;
        color: #aaffaa;
        flex-shrink: 0;
      }

      .email-list-item {
        display: flex;
        align-items: center;
        padding: 8px;
        border-bottom: 1px solid #003000;
        cursor: var(--cursor-pointer);
        position: relative;
        transition: background-color 0.2s;
        border-left: 3px solid transparent;
      }

      /* Unread indicator */
      .email-list-item:not(.read):not(.locked)::before {
        content: '●';
        color: #00ffcc;
        margin-right: 8px;
        font-size: 0.8rem;
        text-shadow: 0 0 5px #00ffcc;
      }
      .email-list-item.read {
        color: #889955;
      }
      .email-list-item.read .email-subject {
        color: #778844;
      }
      .email-list-item:hover:not(.locked) {
        background: rgba(50, 255, 50, 0.1);
      }
      .email-list-item.active {
        border-left-color: #C8FF00;
        background: rgba(0, 255, 0, 0.05);
      }
      .email-list-item.locked {
        color: #556b2f;
        cursor: not-allowed;
        background-color: #111;
        font-style: italic;
      }
      .email-item-details { /* For sender/subject wrapper */
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }
      .email-sender {
        font-weight: bold;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .email-subject {
        font-size: 0.9em;
        color: #aaffaa;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }

      .email-content {
        flex: 1;
        padding: 15px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }
      .email-content-placeholder {
        margin: auto;
        text-align: center;
        color: #556b2f;
      }
      .email-header {
        border-bottom: 2px solid #005000;
        padding-bottom: 10px;
        margin-bottom: 10px;
        flex-shrink: 0;
        color: #aaffaa;
      }
      .email-header span {
        display: block;
      }
      .email-header .label {
        color: #aaffaa;
        font-weight: bold;
        display: inline-block;
        width: 70px;
      }
      .email-body {
        white-space: pre-wrap;
        flex-grow: 1;
        line-height: 1.5;
        color: #baff7f;
        text-shadow: 0 0 2px rgba(0, 255, 0, 0.5);
      }

      /* --- FINAL SHUTDOWN SEQUENCE --- */
      .shutdown-alert-overlay {
        position: fixed;
        inset: 0;
        background-color: rgba(255, 255, 0, 0.2);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 50000;
        pointer-events: none;
      }
      .shutdown-alert-text {
        color: #ffff00;
        font-size: 5rem;
        text-align: center;
        font-weight: bold;
        text-shadow: 0 0 10px #ffff00, 0 0 20px #ff0000;
        animation: shutdown-pulse 0.5s infinite alternate;
        line-height: 1.2;
      }
      @keyframes shutdown-pulse {
        from { opacity: 0.8; transform: scale(1); filter: brightness(1.2); }
        to { opacity: 1; transform: scale(1.05); filter: brightness(1.5); }
      }
      .shutdown-collapse-overlay {
        position: fixed;
        inset: 0;
        z-index: 50000;
        pointer-events: none;
        animation: fade-to-black 3s 1s forwards; /* Starts after 1s, takes 3s */
        background-color: transparent;
      }
      @keyframes fade-to-black {
        from { background-color: transparent; }
        to { background-color: #000; }
      }
      .crt-crack-line {
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        height: 3px;
        background-color: #ff0000;
        box-shadow: 0 0 15px 5px #ff0000;
        transform: translateY(-50%);
        opacity: 0;
        animation: crack-flicker 0.2s 5 alternate 0.3s; /* Flicker for 1s, start after flash */
      }
      @keyframes crack-flicker {
        from { opacity: 1; }
        to { opacity: 0.5; }
      }
      #crt-glass.crt-collapse-inverting {
        animation: invert-colors 3s forwards;
      }
      @keyframes invert-colors {
        0% { filter: invert(0); }
        10% { filter: invert(1); }
        90% { filter: invert(1); }
        100% { filter: invert(0); } /* Invert back just before it's covered by black */
      }
    </style>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <div id="scanline-overlay"></div>
    
    <div id="sad-cat-popup" class="game-over-popup">
      <div class="popup-content">
        <pre class="cat-ascii">
／＞　 フ
| 　_　_|
／` ミ＿xノ
/　　　　 |
/　 ヽ　　 ﾉ
│　　|　|　|
／￣|　　 |　|　|
(￣ヽ＿ヽ)__)
＼二)
        </pre>
        <p class="popup-message">SYSTEM OFFLINE. ARCHIVE LOST. MEOW...</p>
        <p class="popup-submessage">Rebooting primary core...</p>
      </div>
    </div>
    
    <script type="text/babel" data-type="module" src="/index.tsx"></script>
  </body>
</html>